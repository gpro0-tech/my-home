<!DOCTYPE html><html lang="ko"><head>
    <meta charset="UTF-8">
    <title>ë‚´ ë¯¸ë‹ˆí™ˆí”¼ :: ëª¨ë“  ê¸°ëŠ¥ í†µí•© ë²„ì „</title>
    <style>
        @font-face { font-family: 'Galmuri14'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2506-1@1.0/Galmuri14.woff2') format('woff2'); }
        :root { --cy-blue: #3B87AB; --cy-orange: #FF6600; --outer-bg: #83b1d2; }
        body { margin: 0; font-family: 'Galmuri14', sans-serif; background-color: var(--outer-bg); display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; transition: 0.3s; }

        .cy-outer-border { background-color: var(--cy-blue); padding: 15px 10px 15px 25px; border-radius: 15px; border: 1px solid rgba(0,0,0,0.1); display: flex; transition: 0.3s; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .cy-inner-border { background-color: white; border: 2px dashed #999; border-radius: 10px; padding: 10px; display: grid; grid-template-columns: 180px 1fr; width: 850px; height: 550px; gap: 10px; position: relative; }

        .sidebar { display: flex; flex-direction: column; gap: 10px; font-size: 11px; }
        .profile-box { border: 1px solid #ddd; padding: 10px; height: 100%; display: flex; flex-direction: column; align-items: center; }
        .profile-img { width: 140px; height: 110px; background: #f0f0f0; border: 1px solid #eee; margin-bottom: 10px; overflow: hidden; }
        #p-img { width: 100%; height: 100%; object-fit: cover; }
        
        /* ğŸ¨ ì¬ìƒë°” ë””ìì¸ ìˆ˜ì • (íŠ€ì–´ë‚˜ì˜¤ì§€ ì•Šê²Œ box-sizing ë° ë„ˆë¹„ ì¡°ì •) */
        .custom-player { width: 100%; background: #fdfdfd; border: 1px solid #eee; border-radius: 5px; padding: 8px; box-sizing: border-box; margin: 5px 0; overflow: hidden; }
        .player-info { display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px; font-size: 9px; color: var(--cy-blue); font-weight: bold; }
        .player-controls { display: flex; align-items: center; gap: 5px; margin-bottom: 5px; }
        .play-btn { cursor: pointer; font-size: 10px; border: none; background: none; color: var(--cy-blue); padding: 0; font-family: 'Galmuri14'; }
        .vol-slider { flex: 1; height: 3px; cursor: pointer; accent-color: var(--cy-blue); min-width: 0; }
        .player-bar { width: 100%; height: 3px; background: #eee; border-radius: 2px; overflow: hidden; }
        .player-progress { width: 0%; height: 100%; background: var(--cy-orange); transition: 0.3s; }
        #sc-iframe { position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none; }

        .link-btn-area { display: flex; flex-direction: column; gap: 5px; width: 100%; margin: 5px 0; }
        .link-btn { background: #f8f8f8; border: 1px solid #ddd; color: #555; text-decoration: none; padding: 4px; text-align: center; border-radius: 3px; font-size: 10px; }
        #p-msg { color: #666; font-size: 10px; text-align: center; margin-top: 5px; line-height: 1.4; border-top: 1px dashed #eee; padding-top: 10px; width: 100%; }

        .main-panel { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
        .main-title { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 5px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .main-title h1 { margin: 0; font-size: 16px; color: var(--cy-blue); }
        .content-area { flex: 1; background: #fff; border: 1px solid #ddd; padding: 15px; overflow-y: auto; }

        .menu-section { display: none; }
        .menu-section.active { display: block; }

        /* ì‚¬ì§„ì²© & ë°©ëª…ë¡ ë””ìì¸ ë³µêµ¬ */
        #grid-photo { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; padding-top: 10px; }
        .photo-card { position: relative; width: 100%; aspect-ratio: 1/1; overflow: hidden; cursor: pointer; border: 1px solid #eee; }
        .photo-card img { width: 100%; height: 100%; object-fit: cover; }
        .guest-item { border: 1px solid #eee; background: #f9f9f9; padding: 15px; margin-bottom: 15px; display: flex; flex-direction: column; gap: 5px; }
        .guest-right { flex: 1; font-size: 11px; }
        .guest-info { color: var(--cy-blue); font-weight: bold; border-bottom: 1px dashed #ccc; padding-bottom: 5px; display: flex; justify-content: space-between; margin-bottom: 5px; }
        .guest-date { font-weight: normal; color: #999; font-size: 9px; }

        .write-box { background: #f0f0f0; padding: 10px; border-radius: 5px; margin-bottom: 20px; font-size: 11px; }
        .write-box input, .write-box textarea { width: 100%; border: 1px solid #ccc; padding: 5px; margin-bottom: 5px; font-family: 'Galmuri14'; font-size: 11px; box-sizing: border-box; }
        .submit-btn { background: var(--cy-blue); color: white; border: none; padding: 8px; width: 100%; cursor: pointer; border-radius: 3px; font-family: 'Galmuri14'; }

        /* ì„¤ì •ì°½ ë ˆì´ì•„ì›ƒ ë³µêµ¬ */
        #admin-panel label { display: block; margin-top: 10px; font-weight: bold; color: #555; font-size: 11px; }
        #admin-panel input, #admin-panel textarea { width: 100%; margin-top: 5px; font-family: 'Galmuri14'; font-size: 11px; padding: 5px; box-sizing: border-box; border: 1px solid #ccc; }
        .save-btn { background: var(--cy-orange); color: white; border: none; padding: 10px; width: 100%; cursor: pointer; border-radius: 5px; margin-top: 15px; font-family: 'Galmuri14'; }

        .tabs { display: flex; flex-direction: column; gap: 3px; margin-top: 40px; }
        .tab { background: var(--cy-blue); color: white; padding: 8px 5px; border-radius: 0 5px 5px 0; font-size: 10px; cursor: pointer; width: 50px; text-align: center; }
        .tab.active { background: white; color: black; border-left: 1px solid white; position: relative; left: -1px; }
        
        /* ì‚¬ì§„ ì‚­ì œ ë²„íŠ¼ (í™•ëŒ€ ì‹œ) */
        #photo-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 99999; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; }
        #photo-modal img { max-width: 90%; max-height: 80%; border: 4px solid white; border-radius: 4px; }
        .del-btn { margin-top: 15px; background: red; color: white; border: none; padding: 8px 20px; font-family: 'Galmuri14'; cursor: pointer; border-radius: 5px; }
    </style>
    <script src="https://w.soundcloud.com/player/api.js"></script>
</head>
<body onclick="handleFirstClick()">

<div class="cy-outer-border" id="inner-outer-border">
    <div class="cy-inner-border">
        <div class="sidebar">
            <div style="font-size:10px; color:#555;">TODAY <span style="color:red; font-weight:bold;">0</span> | TOTAL 4562</div>
            <div class="profile-box">
                <div class="profile-img"><img id="p-img" src="https://i.imgur.com/ZyPmm34.png"></div>
                <div id="p-name" style="font-weight: bold; color: var(--cy-blue);">ìš°ë ˆ</div>
                
                <div class="custom-player" id="player-ui" style="display:none;">
                    <div class="player-info"><span>BGM â™ª</span><span id="play-state">OFF</span></div>
                    <div class="player-controls">
                        <button class="play-btn" id="btn-toggle" onclick="togglePlay()">â–¶</button>
                        <input type="range" class="vol-slider" min="0" max="100" value="50" oninput="setVolume(this.value)">
                    </div>
                    <div class="player-bar"><div class="player-progress" id="progress-bar"></div></div>
                </div>
                <iframe id="sc-iframe" src="" allow="autoplay"></iframe>

                <div class="link-btn-area">
                    <a href="#" id="btn1-view" target="_blank" class="link-btn">ë§í¬ 1</a>
                    <a href="#" id="btn2-view" target="_blank" class="link-btn">ë§í¬ 2</a>
                </div>
                <div id="p-msg">í™˜ì˜í•©ë‹ˆë‹¤!</div>
            </div>
        </div>

        <div class="main-panel">
            <div class="main-title">
                <h1 id="title-text">í–‰ë³µí•œ ìš°ë¦¬ë“¤ì˜ ê³µê°„ â˜…</h1>
            </div>
            <div class="content-area">
           <div id="section-home" class="menu-section active">
    <div id="mini-room-container" style="
        width: 100%; 
        min-height: 200px; 
        height: auto; 
        background: #f0f0f0; 
        border: 1px solid #eee; 
        position: relative; 
        border-radius: 15px; 
        overflow: hidden; 
        display: flex;
        align-items: center;
        justify-content: center;">
        
        <img src=https://i.imgur.com/IkeantA.png id="mini-room-img" style="width: 100%; height: auto; display: block; object-fit: cover;">

      
    </div>

    <div style="margin-top: 25px; padding: 0 5px;">
        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 8px; margin-bottom: 15px;">
            <span style="font-size: 14px; font-weight: 800; color: #000;">Updated News</span>
            <span style="font-size: 10px; color: #FF6600; font-weight: bold;">New âœ¨</span>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <div style="background: #f9f9f9; padding: 12px; border-radius: 10px; border-left: 4px solid var(--cy-blue); display: flex; justify-content: space-between; align-items: center;">
                <span style="font-size: 11px; color: #444;">ğŸ“¸ ì‚¬ì§„ì²©ì— ìƒˆë¡œìš´ ì¶”ì–µì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.</span>
            </div>
        </div>
    </div>
</div>
                
          <div id="section-photo" class="menu-section">
    <style>
        /* ê°¤ëŸ¬ë¦¬ ì „ì²´ ì»¨í…Œì´ë„ˆ */
        #photo-list { 
            display: flex; 
            flex-direction: column; 
            gap: 25px; 
            padding-bottom: 20px;
        }

        /* ì•„ì´í° ìŠ¤íƒ€ì¼ ë‚ ì§œ í—¤ë” */
        .photo-date-group { }
        .date-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 8px;
            padding: 0 4px;
        }
        .date-label { 
            font-size: 14px; 
            font-weight: 800; 
            color: #000; 
        }
        .date-sub {
            font-size: 10px;
            color: #888;
        }

        /* ì•„ì´í° ìŠ¤íƒ€ì¼ ê·¸ë¦¬ë“œ: ê°„ê²©ì´ ì¢ê³  ì •êµí•¨ */
        .photo-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 2px; /* ì•„ì´í° íŠ¹ìœ ì˜ ì´˜ì´˜í•œ ê°„ê²© */
        }
        
        .photo-box { 
            aspect-ratio: 1/1; 
            overflow: hidden; 
            cursor: pointer; 
            background: #eee;
            position: relative;
        }
        
        .photo-box img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover;
            transition: transform 0.2s ease;
        }

        .photo-box:hover img {
            transform: scale(1.05); /* ì‚´ì§ ì»¤ì§€ëŠ” íš¨ê³¼ */
        }
        
        /* í™•ëŒ€ ë³´ê¸° (ì•„ì´í° í’€í™”ë©´ ëŠë‚Œ) */
        #zoom-view { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: #000; /* ì™„ì „ ê²€ì • ë°°ê²½ */
            z-index: 10000; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
        }
        #zoom-view img { 
            max-width: 100%; 
            max-height: 85%; 
            object-fit: contain;
        }
        
        /* í•˜ë‹¨ ì‚­ì œ ë²„íŠ¼ (ì•„ì´í° ìŠ¤íƒ€ì¼ì˜ ë°˜íˆ¬ëª… ë²„íŠ¼) */
        .del-btn { 
            margin-top: 30px; 
            background: rgba(255, 59, 48, 0.9); /* iOS Red */
            color: white; 
            border: none; 
            padding: 10px 25px; 
            font-family: 'Galmuri14'; 
            font-size: 11px; 
            cursor: pointer; 
            border-radius: 20px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .admin-edit { text-align: right; margin-bottom: 8px; }
        .admin-edit button { background: none; border: none; color: #ccc; font-size: 10px; cursor: pointer; }
        
        #upload-zone { 
            display: none; 
            background: #fff; 
            padding: 15px; 
            border-radius: 12px;
            border: 1px solid #ddd;
            margin-bottom: 15px; 
            text-align: center; 
        }
        .url-input { 
            width: 100%; 
            padding: 10px; 
            margin-bottom: 10px; 
            border: 1px solid #eee; 
            border-radius: 8px;
            font-family: 'Galmuri14'; 
            font-size: 11px; 
            box-sizing: border-box; 
        }
    </style>

    <div class="admin-edit">
        <button onclick="openAdmin()">[í¸ì§‘]</button>
    </div>

    <div id="upload-zone">
        <p style="font-size:11px; color:#333; margin-bottom:10px; font-weight:bold;">ìƒˆë¡œìš´ ì‚¬ì§„ ì¶”ê°€</p>
        <input type="text" id="img-url-input" class="url-input" placeholder="ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”">
        <button class="submit-btn" style="width:100%; border-radius:8px;" onclick="savePhotoByUrl()">ë³´ê´€í•¨ì— ì¶”ê°€</button>
    </div>

    <div id="photo-list"></div>

    <div id="zoom-view">
        <img id="zoom-img" onclick="closeZoom()">
        <button id="photo-delete-btn" class="del-btn" onclick="deleteCurrentPhoto()">ì´ ì‚¬ì§„ ì‚­ì œ</button>
        <p style="color:#666; font-size:10px; margin-top:15px;" onclick="closeZoom()">íƒ­í•˜ì—¬ ë‹«ê¸°</p>
    </div>
</div>

<script>
    let currentViewingIndex = -1;

    function openAdmin() {
        // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ 4562 í™•ì¸
        if (prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸?") === "4562") {
            const zone = document.getElementById('upload-zone');
            zone.style.display = (zone.style.display === 'block') ? 'none' : 'block';
        }
    }

    function savePhotoByUrl() {
        const url = document.getElementById('img-url-input').value;
        if (!url) return alert("ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");

        const now = new Date();
        // ìš”ì¼ ê³„ì‚°ìš©
        const week = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
        const dateStr = `${now.getFullYear()}ë…„ ${now.getMonth() + 1}ì›” ${now.getDate()}ì¼`;
        const dayStr = `${week[now.getDay()]}ìš”ì¼`;

        const gallery = JSON.parse(localStorage.getItem('my_url_gallery') || '[]');
        gallery.unshift({ url: url, date: dateStr, day: dayStr });
        localStorage.setItem('my_url_gallery', JSON.stringify(gallery));

        document.getElementById('img-url-input').value = "";
        document.getElementById('upload-zone').style.display = 'none';
        loadUrlGallery();
    }

    function loadUrlGallery() {
        const gallery = JSON.parse(localStorage.getItem('my_url_gallery') || '[]');
        const list = document.getElementById('photo-list');
        list.innerHTML = "";
        
        if(gallery.length === 0) {
            list.innerHTML = "<p style='text-align:center; color:#ccc; font-size:11px; margin-top:50px;'>ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
        }

        const groups = {};
        gallery.forEach((item, index) => {
            const d = item.date || "ê¸°íƒ€";
            if (!groups[d]) groups[d] = { day: item.day || "", items: [] };
            groups[d].items.push({ url: item.url || item, idx: index });
        });

        Object.keys(groups).sort().reverse().forEach(date => {
            const groupDiv = document.createElement('div');
            groupDiv.className = 'photo-date-group';
            
            groupDiv.innerHTML = `
                <div class="date-header">
                    <span class="date-label">${date}</span>
                    <span class="date-sub">${groups[date].day}</span>
                </div>
            `;
            
            const grid = document.createElement('div');
            grid.className = 'photo-grid';
            
            groups[date].items.forEach(photo => {
                const imgDiv = document.createElement('div');
                imgDiv.className = 'photo-box';
                imgDiv.onclick = () => openZoom(photo.url, photo.idx);
                imgDiv.innerHTML = `<img src="${photo.url}" onerror="this.src='https://via.placeholder.com/150?text=Invalid+Link'">`;
                grid.appendChild(imgDiv);
            });
            
            groupDiv.appendChild(grid);
            list.appendChild(groupDiv);
        });
    }

    function openZoom(src, index) {
        currentViewingIndex = index;
        document.getElementById('zoom-img').src = src;
        document.getElementById('zoom-view').style.display = 'flex';
    }

    function closeZoom() {
        document.getElementById('zoom-view').style.display = 'none';
    }

    function deleteCurrentPhoto() {
        if (confirm("ì •ë§ë¡œ ì‚­ì œí• ê¹Œìš”?")) {
            // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ 4562 í™•ì¸
            if (prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.") === "4562") {
                let gallery = JSON.parse(localStorage.getItem('my_url_gallery') || '[]');
                gallery.splice(currentViewingIndex, 1);
                localStorage.setItem('my_url_gallery', JSON.stringify(gallery));
                closeZoom();
                loadUrlGallery();
            } else {
                alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
            }
        }
    }

    setInterval(() => {
        if (document.getElementById('section-photo').classList.contains('active') && 
            document.getElementById('photo-list').innerHTML === "") {
            loadUrlGallery();
        }
    }, 500);

    window.onload = loadUrlGallery;
</script>

                <div id="section-guest" class="menu-section">
                    <div class="write-box">
                        <input type="text" id="guest-nickname" placeholder="ë‹‰ë„¤ì„">
                        <textarea id="guest-content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                        <button class="submit-btn" onclick="addGuest()">ë°©ëª…ë¡ ë“±ë¡</button>
                    </div>
                    <div id="grid-guest"></div>
                </div>

                <div id="section-admin" class="menu-section">
                    <h3 style="font-size:12px; color:var(--cy-orange);">[ ê´€ë¦¬ì ì„¤ì • ]</h3>
                    <div id="admin-panel">
                        <label>ğŸ–¼ï¸ í”„ë¡œí•„ ì´ë¯¸ì§€ URL</label><input type="text" id="in-img-url">
                        <label>ğŸµ BGM ì£¼ì†Œ (ì‚¬ìš´ë“œí´ë¼ìš°ë“œ)</label><input type="text" id="in-bgm-url">
                        <label>ğŸ”— ë§í¬ ë²„íŠ¼ 1</label><div style="display:flex;gap:5px;"><input type="text" id="in-btn1-name" placeholder="ì´ë¦„"><input type="text" id="in-btn1-url" placeholder="URL"></div>
                        <label>ğŸ”— ë§í¬ ë²„íŠ¼ 2</label><div style="display:flex;gap:5px;"><input type="text" id="in-btn2-name" placeholder="ì´ë¦„"><input type="text" id="in-btn2-url" placeholder="URL"></div>
                        <label>ğŸ¨ ë°°ê²½ / í…Œë§ˆ ì»¬ëŸ¬</label><div style="display:flex;gap:5px;"><input type="color" id="in-outer-bg"><input type="color" id="in-theme-color"></div>
                        <label>ì œëª©/ì´ë¦„/ìƒíƒœë©”ì‹œì§€</label><input type="text" id="in-title"><input type="text" id="in-name"><textarea id="in-msg"></textarea>
                        <button class="save-btn" onclick="saveSettings()">ì„¤ì • ì €ì¥í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tabs" style="display: flex; flex-direction: column; gap: 3px; margin-top: 40px; height: 530px;">
    <div class="tab active" onclick="showMenu('home', this)">í™ˆ</div>
    <div class="tab" onclick="showMenu('photo', this)">ì‚¬ì§„ì²©</div>
    <div class="tab" onclick="showMenu('guest', this)">ë°©ëª…ë¡</div>
    
    <div class="tab" style="background:#fff; margin-top: auto; margin-bottom: 10px;" onclick="checkAdmin(this)">ì„¤ì •</div>
</div>

<div id="photo-modal" onclick="if(event.target === this) this.style.display='none'">
    <img id="modal-img" src="">
    <button class="del-btn" onclick="deletePhoto()">ì´ ì‚¬ì§„ ì‚­ì œ</button>
</div>

<script>
    const ADMIN_PW = "4562";
    let widget, isPlaying = false, hasStarted = false, selectedIdx = -1;

    window.onload = function() {
        const savedData = JSON.parse(localStorage.getItem('cy-settings') || '{}');
        applySettings(savedData);
        if(savedData.bgmUrl) initMusic(savedData.bgmUrl);
        renderPhotos();
        renderGuests();
    };

    function initMusic(url) {
        document.getElementById('player-ui').style.display = 'block';
        const iframe = document.getElementById('sc-iframe');
        iframe.src = `https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}&auto_play=true`;
        widget = SC.Widget(iframe);
        widget.bind(SC.Widget.Events.READY, () => widget.setVolume(50));
        widget.bind(SC.Widget.Events.PLAY, () => { isPlaying = true; document.getElementById('btn-toggle').innerText = 'â¸'; document.getElementById('play-state').innerText = 'â™ªING'; });
        widget.bind(SC.Widget.Events.PAUSE, () => { isPlaying = false; document.getElementById('btn-toggle').innerText = 'â–¶'; document.getElementById('play-state').innerText = 'PAUSE'; });
        widget.bind(SC.Widget.Events.PLAY_PROGRESS, (d) => { document.getElementById('progress-bar').style.width = (d.relativePosition * 100) + '%'; });
    }

    function handleFirstClick() { if(!hasStarted && widget) { widget.play(); hasStarted = true; } }
    function togglePlay() { if(widget) widget.toggle(); }
    function setVolume(v) { if(widget) widget.setVolume(v); }

    function applySettings(d) {
        if(d.imgUrl) document.getElementById('p-img').src = d.imgUrl;
        if(d.outerBg) document.body.style.backgroundColor = d.outerBg;
        if(d.themeColor) { 
            document.documentElement.style.setProperty('--cy-blue', d.themeColor); 
            document.getElementById('inner-outer-border').style.backgroundColor = d.themeColor; 
        }
        if(d.title) document.getElementById('title-text').innerText = d.title;
        if(d.name) document.getElementById('p-name').innerText = d.name;
        if(d.msg) document.getElementById('p-msg').innerText = d.msg;
        
        // ë§í¬ ë²„íŠ¼ ë°˜ì˜
        if(d.btn1Name) { document.getElementById('btn1-view').innerText = d.btn1Name; document.getElementById('btn1-view').href = d.btn1Url || '#'; }
        if(d.btn2Name) { document.getElementById('btn2-view').innerText = d.btn2Name; document.getElementById('btn2-view').href = d.btn2Url || '#'; }

        // ì„¤ì •ì°½ ê°’ ìœ ì§€ (ì´ˆê¸°í™” ë°©ì§€)
        document.getElementById('in-img-url').value = d.imgUrl || '';
        document.getElementById('in-bgm-url').value = d.bgmUrl || '';
        document.getElementById('in-btn1-name').value = d.btn1Name || '';
        document.getElementById('in-btn1-url').value = d.btn1Url || '';
        document.getElementById('in-btn2-name').value = d.btn2Name || '';
        document.getElementById('in-btn2-url').value = d.btn2Url || '';
        document.getElementById('in-outer-bg').value = d.outerBg || '#83b1d2';
        document.getElementById('in-theme-color').value = d.themeColor || '#3B87AB';
        document.getElementById('in-title').value = d.title || 'í–‰ë³µí•œ ìš°ë¦¬ë“¤ì˜ ê³µê°„ â˜…';
        document.getElementById('in-name').value = d.name || 'ìš°ë ˆ';
        document.getElementById('in-msg').value = d.msg || 'í™˜ì˜í•©ë‹ˆë‹¤!';
    }

    function saveSettings() {
        const s = {
            imgUrl: document.getElementById('in-img-url').value,
            bgmUrl: document.getElementById('in-bgm-url').value,
            outerBg: document.getElementById('in-outer-bg').value,
            themeColor: document.getElementById('in-theme-color').value,
            title: document.getElementById('in-title').value,
            name: document.getElementById('in-name').value,
            msg: document.getElementById('in-msg').value,
            btn1Name: document.getElementById('in-btn1-name').value,
            btn1Url: document.getElementById('in-btn1-url').value,
            btn2Name: document.getElementById('in-btn2-name').value,
            btn2Url: document.getElementById('in-btn2-url').value
        };
        localStorage.setItem('cy-settings', JSON.stringify(s));
        alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        location.reload(); 
    }

    function uploadPhoto(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const photos = JSON.parse(localStorage.getItem('ure-gallery') || '[]');
                photos.unshift(e.target.result);
                localStorage.setItem('ure-gallery', JSON.stringify(photos));
                renderPhotos();
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function renderPhotos() {
        const photos = JSON.parse(localStorage.getItem('ure-gallery') || '[]');
        const grid = document.getElementById('grid-photo');
        grid.innerHTML = photos.map((src, i) => `
            <div class="photo-card" onclick="openPhoto(${i}, '${src}')">
                <img src="${src}">
            </div>
        `).join('');
    }

    function openPhoto(idx, src) {
        selectedIdx = idx;
        document.getElementById('modal-img').src = src;
        document.getElementById('photo-modal').style.display = 'flex';
    }

    function deletePhoto() {
        if(confirm("ì •ë§ ì‚­ì œí• ê¹Œìš”?") && prompt("PW?") === ADMIN_PW) {
            let photos = JSON.parse(localStorage.getItem('ure-gallery') || '[]');
            photos.splice(selectedIdx, 1);
            localStorage.setItem('ure-gallery', JSON.stringify(photos));
            document.getElementById('photo-modal').style.display = 'none';
            renderPhotos();
        }
    }

    function addGuest() {
        const n = document.getElementById('guest-nickname').value || 'ìµëª…';
        const c = document.getElementById('guest-content').value;
        const d = new Date().toLocaleString('ko-KR', { month:'short', day:'numeric', hour:'2-digit', minute:'2-digit' });
        if(!c) return alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!");

        const guests = JSON.parse(localStorage.getItem('ure-guests') || '[]');
        guests.unshift({ nick: n, content: c, date: d });
        localStorage.setItem('ure-guests', JSON.stringify(guests));
        
        document.getElementById('guest-content').value = "";
        renderGuests();
    }

    function renderGuests() {
        const guests = JSON.parse(localStorage.getItem('ure-guests') || '[]');
        document.getElementById('grid-guest').innerHTML = guests.map(g => `
            <div class="guest-item">
                <div class="guest-right">
                    <div class="guest-info"><span>${g.nick}</span><span class="guest-date">${g.date}</span></div>
                    <div style="white-space: pre-wrap;">${g.content}</div>
                </div>
            </div>
        `).join('');
    }

    function showMenu(m, t) {
        document.querySelectorAll('.menu-section').forEach(s => s.classList.remove('active'));
        document.getElementById('section-' + m).classList.add('active');
        document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
        t.classList.add('active');
    }

    function checkAdmin(t) { if (prompt("ë¹„ë°€ë²ˆí˜¸?") === ADMIN_PW) showMenu('admin', t); }
</script>
</body></html>
